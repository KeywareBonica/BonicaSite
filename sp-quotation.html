<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Quotation</title>
  <link rel="stylesheet" href="sp-quotation.css">
  <!-- Font Awesome for icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <!-- Additional CSS to ensure content is visible -->
  <style>
    .job-cart-details-section {
      margin: 20px 0;
      padding: 20px;
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
    }
    
    .job-cart-info h3 {
      color: #0d6efd;
      margin-bottom: 15px;
    }
    
    .job-details-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    
    .detail-item {
      display: flex;
      flex-direction: column;
    }
    
    .detail-item.full-width {
      grid-column: 1 / -1;
    }
    
    .detail-item label {
      font-weight: bold;
      color: #495057;
      margin-bottom: 5px;
    }
    
    .detail-item span {
      color: #212529;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #495057;
    }
    
    .form-group select,
    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 10px;
    }
    
    .upload-btn {
      background-color: #0d6efd;
      color: white;
    }
    
    .confirm-btn {
      background-color: #198754;
      color: white;
    }
    
    .confirm-btn:disabled {
      background-color: #6c757d;
      cursor: not-allowed;
    }
    
    #message {
      margin-top: 15px;
      padding: 10px;
      border-radius: 4px;
    }
  </style>
</head>
<body>

    <!-- Navbar -->
  <nav class="navbar">
    <a href="index.html" class="logo">
      <img src="logo.jpeg" alt="Logo" />
      Bonica
    </a>
    <ul class="nav-links" id="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="service-provider-dashboard.html">Dashboard</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Bookings</a></li>
      <li><a href="#">Help</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
    <div class="hamburger" id="hamburger">
      <div></div><div></div><div></div>
    </div>
  </nav>

<main>
  <div class="quotation-container">
    <div style="margin-bottom: 1rem;">
      <a href="service-provider-dashboard.html" style="color: #0d6efd; text-decoration: none;">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
      </a>
    </div>
    <h2> Upload Quotation</h2>

    <form id="quotationForm">
    <!-- Job Cart Dropdown -->
     <div class="form-group">
    <label for="job_cart_select">Select Accepted Job Cart:</label>
    <select id="job_cart_select" name="job_cart_id" required>
    <option value="">-- Select Job Cart --</option>
    <!-- Sample Job Carts for Demo - Multiple per Service -->
    
    <!-- Photography Services (3+) -->
    <option value="demo-wedding-photo-1" data-job-details='{"eventName":"Sarah & John Wedding","eventDate":"2025-10-25","eventLocation":"Johannesburg","clientName":"Sarah Johnson","jobDetails":"Professional wedding photography for 150 guests, 8-hour coverage, edited photos, online gallery"}'>Photography - Sarah & John Wedding (Oct 25, 2025) - Sarah Johnson</option>
    <option value="demo-corporate-photo-1" data-job-details='{"eventName":"Company Annual Dinner","eventDate":"2025-10-27","eventLocation":"Sandton","clientName":"James Wilson","jobDetails":"Corporate event photography, 4-hour coverage, group photos, candid shots, edited gallery"}'>Photography - Company Annual Dinner (Oct 27, 2025) - James Wilson</option>
    <option value="demo-birthday-photo-1" data-job-details='{"eventName":"Emma's 30th Birthday","eventDate":"2025-10-31","eventLocation":"Pretoria","clientName":"Emma Smith","jobDetails":"Birthday party photography, 3-hour coverage, party atmosphere, group photos"}'>Photography - Emma's 30th Birthday (Oct 31, 2025) - Emma Smith</option>
    <option value="demo-graduation-photo-1" data-job-details='{"eventName":"University Graduation","eventDate":"2025-11-03","eventLocation":"Cape Town","clientName":"Michael Brown","jobDetails":"Graduation ceremony photography, formal portraits, ceremony coverage, family photos"}'>Photography - University Graduation (Nov 3, 2025) - Michael Brown</option>
    
    <!-- Catering Services (3+) -->
    <option value="demo-corporate-catering-1" data-job-details='{"eventName":"Tech Conference 2025","eventDate":"2025-10-28","eventLocation":"Sandton","clientName":"Mike Chen","jobDetails":"Corporate catering for 200 attendees, lunch and coffee breaks, dietary requirements accommodated"}'>Catering - Tech Conference 2025 (Oct 28, 2025) - Mike Chen</option>
    <option value="demo-wedding-catering-1" data-job-details='{"eventName":"Lisa & Tom Wedding","eventDate":"2025-11-05","eventLocation":"Durban","clientName":"Lisa Brown","jobDetails":"Wedding catering for 120 guests, 3-course meal, vegetarian options, wedding cake included"}'>Catering - Lisa & Tom Wedding (Nov 5, 2025) - Lisa Brown</option>
    <option value="demo-birthday-catering-1" data-job-details='{"eventName":"Emma's 30th Birthday","eventDate":"2025-10-31","eventLocation":"Pretoria","clientName":"Emma Smith","jobDetails":"Birthday party catering for 50 guests, finger foods, birthday cake, beverages"}'>Catering - Emma's 30th Birthday (Oct 31, 2025) - Emma Smith</option>
    <option value="demo-corporate-catering-2" data-job-details='{"eventName":"Annual Company Meeting","eventDate":"2025-11-02","eventLocation":"Cape Town","clientName":"David Wilson","jobDetails":"Corporate lunch catering for 100 people, buffet style, coffee breaks, dietary accommodations"}'>Catering - Annual Company Meeting (Nov 2, 2025) - David Wilson</option>
    
    <!-- DJ Services (3+) -->
    <option value="demo-birthday-dj-1" data-job-details='{"eventName":"Emma's 30th Birthday","eventDate":"2025-10-31","eventLocation":"Pretoria","clientName":"Emma Smith","jobDetails":"DJ services for birthday party, 4-hour set, sound system, lighting, music requests welcome"}'>DJ - Emma's 30th Birthday (Oct 31, 2025) - Emma Smith</option>
    <option value="demo-wedding-dj-1" data-job-details='{"eventName":"Sarah & John Wedding","eventDate":"2025-10-25","eventLocation":"Johannesburg","clientName":"Sarah Johnson","jobDetails":"Wedding DJ services, ceremony music, reception entertainment, 6-hour coverage, special requests"}'>DJ - Sarah & John Wedding (Oct 25, 2025) - Sarah Johnson</option>
    <option value="demo-corporate-dj-1" data-job-details='{"eventName":"Company Annual Dinner","eventDate":"2025-10-27","eventLocation":"Sandton","clientName":"James Wilson","jobDetails":"Corporate event DJ, background music, announcements, 3-hour set, professional atmosphere"}'>DJ - Company Annual Dinner (Oct 27, 2025) - James Wilson</option>
    <option value="demo-graduation-dj-1" data-job-details='{"eventName":"University Graduation","eventDate":"2025-11-03","eventLocation":"Cape Town","clientName":"Michael Brown","jobDetails":"Graduation party DJ, celebration music, announcements, 4-hour set, family-friendly"}'>DJ - University Graduation (Nov 3, 2025) - Michael Brown</option>
    
    <!-- Venue Services (3+) -->
    <option value="demo-corporate-venue-1" data-job-details='{"eventName":"Annual Company Meeting","eventDate":"2025-11-02","eventLocation":"Cape Town","clientName":"David Wilson","jobDetails":"Conference venue for 100 people, AV equipment, catering facilities, parking for 50 cars"}'>Venue - Annual Company Meeting (Nov 2, 2025) - David Wilson</option>
    <option value="demo-wedding-venue-1" data-job-details='{"eventName":"Sarah & John Wedding","eventDate":"2025-10-25","eventLocation":"Johannesburg","clientName":"Sarah Johnson","jobDetails":"Wedding venue for 150 guests, outdoor ceremony space, indoor reception hall, bridal suite"}'>Venue - Sarah & John Wedding (Oct 25, 2025) - Sarah Johnson</option>
    <option value="demo-birthday-venue-1" data-job-details='{"eventName":"Emma's 30th Birthday","eventDate":"2025-10-31","eventLocation":"Pretoria","clientName":"Emma Smith","jobDetails":"Birthday party venue for 50 guests, dance floor, bar area, outdoor terrace"}'>Venue - Emma's 30th Birthday (Oct 31, 2025) - Emma Smith</option>
    <option value="demo-corporate-venue-2" data-job-details='{"eventName":"Tech Conference 2025","eventDate":"2025-10-28","eventLocation":"Sandton","clientName":"Mike Chen","jobDetails":"Conference venue for 200 attendees, presentation rooms, networking areas, catering facilities"}'>Venue - Tech Conference 2025 (Oct 28, 2025) - Mike Chen</option>
    
    <!-- Makeup Services (3+) -->
    <option value="demo-wedding-makeup-1" data-job-details='{"eventName":"Lisa & Tom Wedding","eventDate":"2025-11-05","eventLocation":"Durban","clientName":"Lisa Brown","jobDetails":"Bridal makeup and hair styling, trial session included, bridal party makeup for 6 people"}'>Makeup - Lisa & Tom Wedding (Nov 5, 2025) - Lisa Brown</option>
    <option value="demo-wedding-makeup-2" data-job-details='{"eventName":"Sarah & John Wedding","eventDate":"2025-10-25","eventLocation":"Johannesburg","clientName":"Sarah Johnson","jobDetails":"Bridal makeup and hair styling, mother of bride makeup, bridesmaids makeup for 4 people"}'>Makeup - Sarah & John Wedding (Oct 25, 2025) - Sarah Johnson</option>
    <option value="demo-event-makeup-1" data-job-details='{"eventName":"Emma's 30th Birthday","eventDate":"2025-10-31","eventLocation":"Pretoria","clientName":"Emma Smith","jobDetails":"Birthday party makeup and hair styling, glamorous look, photo-ready makeup"}'>Makeup - Emma's 30th Birthday (Oct 31, 2025) - Emma Smith</option>
    <option value="demo-corporate-makeup-1" data-job-details='{"eventName":"Company Annual Dinner","eventDate":"2025-10-27","eventLocation":"Sandton","clientName":"James Wilson","jobDetails":"Professional makeup for corporate event speakers, natural look, camera-ready makeup"}'>Makeup - Company Annual Dinner (Oct 27, 2025) - James Wilson</option>
    
    <!-- Additional Services -->
    <option value="demo-florist-1" data-job-details='{"eventName":"Sarah & John Wedding","eventDate":"2025-10-25","eventLocation":"Johannesburg","clientName":"Sarah Johnson","jobDetails":"Wedding floral arrangements, bridal bouquet, centerpieces for 15 tables, ceremony arch"}'>Florist - Sarah & John Wedding (Oct 25, 2025) - Sarah Johnson</option>
    <option value="demo-lighting-1" data-job-details='{"eventName":"Emma's 30th Birthday","eventDate":"2025-10-31","eventLocation":"Pretoria","clientName":"Emma Smith","jobDetails":"Party lighting setup, dance floor lighting, mood lighting, special effects"}'>Lighting - Emma's 30th Birthday (Oct 31, 2025) - Emma Smith</option>
    <option value="demo-security-1" data-job-details='{"eventName":"Tech Conference 2025","eventDate":"2025-10-28","eventLocation":"Sandton","clientName":"Mike Chen","jobDetails":"Event security for 200 attendees, access control, crowd management, emergency protocols"}'>Security - Tech Conference 2025 (Oct 28, 2025) - Mike Chen</option>
    </select>
    <small class="form-text text-muted">Only accepted job carts are available for quotation submission.</small>
  </div>

      <div class="form-group">
        <label for="quotation_price">Quotation Price</label>
        <input type="number" id="quotation_price" name="quotation_price" placeholder="R 0.00" required>
      </div>

      <div class="form-group">
        <label for="quotation_details">Quotation Details</label>
        <textarea id="quotation_details" name="quotation_details" placeholder="e.g., Catering for 50 guests" required></textarea>
      </div>

      <div class="form-group">
        <label for="quotation_file">Select Quotation File</label>
        <input type="file" id="quotation_file" name="quotation_file" accept=".pdf,.docx,.jpg,.png" required>
        <small>Accepted: PDF, DOCX, JPG, PNG (Max 10MB)</small>
      </div>

      <button type="submit" class="btn upload-btn"> Upload</button>
      <button type="button" id="confirmBtn" class="btn confirm-btn" disabled> Confirm Quotation</button>
    </form>

    <p id="message"></p>
  </div>
</main>
  <script type="module" src="sp-quotation.js"></script>

  <!-- IMMEDIATE CONTENT DISPLAY SCRIPT -->
  <script>
    // Ensure content shows immediately - no JavaScript dependencies
    console.log('âš¡ QUOTATION PAGE: Ensuring content displays immediately...');
    
    // Show job cart details for first option immediately
    document.addEventListener('DOMContentLoaded', function() {
      console.log('âœ… QUOTATION PAGE: DOM ready, showing first job cart details...');
      
      const jobCartSelect = document.getElementById('job_cart_select');
      if (jobCartSelect && jobCartSelect.options.length > 1) {
        // Select first job cart option
        jobCartSelect.selectedIndex = 1;
        
        // Show details for first job cart
        const firstOption = jobCartSelect.options[1];
        if (firstOption && firstOption.dataset.jobDetails) {
          const jobDetails = JSON.parse(firstOption.dataset.jobDetails);
          showJobCartDetailsImmediate(jobDetails);
        }
      }
      
      console.log('âœ… QUOTATION PAGE: Content should now be visible!');
    });
    
    // Simple function to show job cart details immediately
    function showJobCartDetailsImmediate(jobDetails) {
      console.log('ðŸ“‹ Showing job details:', jobDetails);
      
      // Remove existing details if any
      const existingDetails = document.getElementById('job-cart-details');
      if (existingDetails) {
        existingDetails.remove();
      }
      
      // Create job cart details section
      const detailsSection = document.createElement('div');
      detailsSection.id = 'job-cart-details';
      detailsSection.className = 'job-cart-details-section';
      detailsSection.innerHTML = `
        <div class="job-cart-info">
          <h3><i class="fas fa-info-circle"></i> Job Details</h3>
          <div class="job-details-grid">
            <div class="detail-item">
              <label>Event:</label>
              <span>${jobDetails.eventName}</span>
            </div>
            <div class="detail-item">
              <label>Date:</label>
              <span>${new Date(jobDetails.eventDate).toLocaleDateString()}</span>
            </div>
            <div class="detail-item">
              <label>Location:</label>
              <span>${jobDetails.eventLocation}</span>
            </div>
            <div class="detail-item">
              <label>Client:</label>
              <span>${jobDetails.clientName}</span>
            </div>
            <div class="detail-item full-width">
              <label>Requirements:</label>
              <span>${jobDetails.jobDetails}</span>
            </div>
          </div>
        </div>
      `;
      
      // Insert after the job cart select dropdown
      const formGroup = document.getElementById('job_cart_select').closest('.form-group');
      if (formGroup) {
        formGroup.parentNode.insertBefore(detailsSection, formGroup.nextSibling);
      }
      
      console.log('âœ… Job details displayed!');
    }
    
    // Make the function globally available
    window.showJobCartDetailsImmediate = showJobCartDetailsImmediate;
  </script>

  <!-- Footer -->
  <footer id="footer">
    <section>
      <h2>Get In Touch</h2>
      <dl class="alt">
        <dt>Address</dt><dd>Joriseen Street, Johannesburg</dd>
        <dt>Phone</dt><dd>076 244 9990</dd>
        <dt>Email</dt><dd><a href="mailto:Bonica@gmail.com">Bonica@gmail.com</a></dd>
      </dl>
    </section>

    <section>
      <h2>Quick Links</h2>
      <ul class="divided">
        <li><a href="#">About Us</a></li>
        <li><a href="#">Contact Us</a></li>
        <li><a href="#">Our Services</a></li>
        <li><a href="#">Terms & Conditions</a></li>
      </ul>
    </section>

    <section>
      <h2>Follow Us</h2>
      <ul class="icons">
        <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
        <li><a href="#"><i class="fab fa-twitter"></i></a></li>
        <li><a href="#"><i class="fab fa-youtube"></i></a></li>
      </ul>
    </section>

    <p class="copyright">&copy; 2025 Bonica Event Booking System</p>
  </footer>

    <!-- JavaScript -->
  <script>
    // Navbar toggle
    const hamburger = document.getElementById("hamburger");
    const navLinks = document.getElementById("nav-links");
    hamburger.addEventListener("click", () => {
      navLinks.classList.toggle("active");
    });
    </script>
</body>
</html>