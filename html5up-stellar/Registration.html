<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registration - Bonica</title>
  <meta name="description" content="Create your account for Bonica event services">
  <meta name="keywords" content="registration, signup, event management, final year project, account creation">
  <meta name="author" content="Keyware Development Company">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Professional Theme CSS -->
  <link href="css/professional-theme.css" rel="stylesheet">

  <!-- Custom Registration Styles -->
  <style>
    body {
      background: var(--background-secondary);
      min-height: 100vh;
    }

    .registration-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 2rem;
    }

    .registration-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .registration-logo {
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-light) 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      color: white;
      font-size: 2.5rem;
      box-shadow: var(--shadow-lg);
    }

    .registration-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .registration-subtitle {
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    .registration-card {
      background: var(--background-primary);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-xl);
      border: 1px solid rgba(59, 130, 246, 0.1);
      overflow: hidden;
    }

    .registration-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-blue), var(--accent-blue), var(--primary-blue));
    }

    .user-type-selection {
      background: var(--secondary-blue);
      padding: 2rem;
      border-bottom: 1px solid #e5e7eb;
    }

    .user-type-options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-top: 1rem;
    }

    .user-type-option {
      padding: 1.5rem;
      border: 2px solid #e5e7eb;
      border-radius: var(--radius-lg);
      text-align: center;
      cursor: pointer;
      transition: var(--transition-fast);
      background: var(--background-primary);
    }

    .user-type-option:hover {
      border-color: var(--primary-blue);
      background: var(--secondary-blue);
    }

    .user-type-option.selected {
      border-color: var(--primary-blue);
      background: var(--primary-blue);
      color: white;
    }

    .user-type-option i {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      display: block;
    }

    .form-section {
      padding: 2rem;
    }

    .form-section h5 {
      color: var(--primary-blue);
      margin-bottom: 1.5rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .password-container {
      position: relative;
    }

    .password-toggle {
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      color: var(--text-muted);
      font-size: 1.2rem;
      transition: var(--transition-fast);
    }

    .password-toggle:hover {
      color: var(--primary-blue);
    }

    .error {
      color: var(--error);
      font-size: 0.85rem;
      margin-top: 0.25rem;
      display: block;
    }

    .success-message {
      color: var(--success);
      text-align: center;
      margin-top: 1rem;
      padding: 0.75rem;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-radius: var(--radius-md);
      display: none;
    }

    .error-message {
      color: var(--error);
      text-align: center;
      margin-top: 1rem;
      padding: 0.75rem;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: var(--radius-md);
      display: none;
    }

    .btn-register {
      width: 100%;
      padding: 1rem;
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-blue-light) 100%);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition-fast);
    }

    .btn-register:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      background: linear-gradient(135deg, var(--primary-blue-dark) 0%, var(--primary-blue) 100%);
    }

    .btn-register:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }


    @media (max-width: 768px) {
      .registration-container {
        padding: 1rem;
      }
      
      .user-type-options {
        grid-template-columns: 1fr;
      }
      
    }
  </style>
</head>
<body>
  <!-- Academic Project Badge -->

  <!-- Professional Navigation -->
  <nav class="professional-nav">
    <div class="nav-container">
      <a href="index.html" class="logo">
        <img src="img/logo.jpeg" alt="Bonica Logo">
        <span>Bonica</span>
      </a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="Login.html">Login</a></li>
        <li><a href="Registration.html" class="active">Register</a></li>
      </ul>
    </div>
  </nav>

  <!-- Registration Container -->
  <div class="registration-container">
    <div class="registration-header">
      <div class="registration-logo">
        <i class="fas fa-user-plus"></i>
      </div>
      <h1 class="registration-title">Create Your Account</h1>
      <p class="registration-subtitle">Join our Event Management System and start managing your events professionally</p>
    </div>

    <div class="registration-card">
      <!-- User Type Selection -->
      <div class="user-type-selection">
        <h4 class="text-center mb-3">Choose Your Account Type</h4>
        <div class="user-type-options">
          <div class="user-type-option" data-type="customer" onclick="selectUserType('customer')">
            <i class="fas fa-user"></i>
            <h5>Customer</h5>
            <p>I want to book events and services</p>
            </div>
          <div class="user-type-option" data-type="service_provider" onclick="selectUserType('service_provider')">
            <i class="fas fa-briefcase"></i>
            <h5>Service Provider</h5>
            <p>I want to offer my services</p>
          </div>
        </div>
        <div class="error" id="usertypeSelectError"></div>
      </div>

      <!-- Registration Form -->
            <form id="registrationForm" style="display:none;" autocomplete="off">
                <!-- Customer Form -->
        <div id="customerForm" style="display:none;" class="form-section">
          <h5><i class="fas fa-user"></i> Customer Details</h5>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="name" class="form-label">Name</label>
                      <input type="text" class="form-control" id="name" autocomplete="off">
                      <div class="error" id="nameError"></div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="surname" class="form-label">Surname</label>
                      <input type="text" class="form-control" id="surname"autocomplete="off">
                      <div class="error" id="surnameError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="password" class="form-label">Password</label>
                      <div class="password-container">
                        <input type="password" class="form-control" id="password" autocomplete="off">
                        <span class="password-toggle" id="passwordToggle">üëÅÔ∏è</span>
                      </div>
                      <div class="error" id="passwordError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="confirmPassword" class="form-label">Re-type Password</label>
                      <div class="password-container">
                        <input type="password" class="form-control" id="confirmPassword" autocomplete="off">
                        <span class="password-toggle" id="confirmPasswordToggle">üëÅÔ∏è</span>
                      </div>
                      <div class="error" id="confirmPasswordError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="contact" class="form-label">Contact Number</label>
                      <input type="tel" class="form-control" id="contact" autocomplete="off">
                      <div class="error" id="contactError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="email" class="form-label">Email Address</label>
                      <input type="email" class="form-control" id="email" autocomplete="off">
                      <div class="error" id="emailError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="province" class="form-label">Province</label>
                      <input type="text" class="form-control" id="province" autocomplete="off">
                      <div class="error" id="provinceError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="city" class="form-label">City</label>
                      <input type="text" class="form-control" id="city" autocomplete="off">
                      <div class="error" id="cityError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="town" class="form-label">Town</label>
                      <input type="text" class="form-control" id="town" autocomplete="off">
                      <div class="error" id="townError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="houseNumber" class="form-label">House Number</label>
                      <input type="text" class="form-control" id="houseNumber" autocomplete="off">
                      <div class="error" id="houseNumberError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="streetName" class="form-label">Street Name</label>
                      <input type="text" class="form-control" id="streetName" autocomplete="off">
                      <div class="error" id="streetNameError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="postalCode" class="form-label">Postal Code</label>
                      <input type="text" class="form-control" id="postalCode" autocomplete="off">
                      <div class="error" id="postalCodeError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="notification" class="form-label">Preferred Notification</label>
                      <select class="form-select" id="notification">
                        <option selected disabled value="">Select option</option>
                        <option value="email">Email</option>
                        <option value="sms">SMS</option>
                      </select>
                      <div class="error" id="notificationError"></div>
                    </div>
                  </div>
                </div>

                <!-- Service Provider Form -->
        <div id="serviceProviderForm" style="display:none;" class="form-section">
          <h5><i class="fas fa-briefcase"></i> Service Provider Details</h5>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="spName" class="form-label">Name</label>
                      <input type="text" class="form-control" id="spName" autocomplete="off">
                      <div class="error" id="spNameError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spSurname" class="form-label">Surname</label>
                      <input type="text" class="form-control" id="spSurname" autocomplete="off">
                      <div class="error" id="spSurnameError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spPassword" class="form-label">Password</label>
                      <div class="password-container">
                        <input type="password" class="form-control" id="spPassword" autocomplete="off">
                        <span class="password-toggle" id="spPasswordToggle">üëÅÔ∏è</span>
                      </div>
                      <div class="error" id="spPasswordError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spConfirmPassword" class="form-label">Re-type Password</label>
                      <div class="password-container">
                        <input type="password" class="form-control" id="spConfirmPassword" autocomplete="off">
                        <span class="password-toggle" id="spConfirmPasswordToggle">üëÅÔ∏è</span>
                      </div>
                      <div class="error" id="spConfirmPasswordError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spContact" class="form-label">Contact No</label>
                      <input type="tel" class="form-control" id="spContact" autocomplete="off">
                      <div class="error" id="spContactError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spEmail" class="form-label">Email</label>
                      <input type="email" class="form-control" id="spEmail" autocomplete="off">
                      <div class="error" id="spEmailError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spLocation" class="form-label">Location</label>
                      <input type="text" class="form-control" id="spLocation" autocomplete="off">
                      <div class="error" id="spLocationError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label class="form-label">Operating Days</label><br>
                      <div id="spOperatingDays" class="d-flex flex-wrap gap-3">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Monday" id="monday">
                          <label class="form-check-label" for="monday">Monday</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Tuesday" id="tuesday">
                          <label class="form-check-label" for="tuesday">Tuesday</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Wednesday" id="wednesday">
                          <label class="form-check-label" for="wednesday">Wednesday</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Thursday" id="thursday">
                          <label class="form-check-label" for="thursday">Thursday</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Friday" id="friday">
                          <label class="form-check-label" for="friday">Friday</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Saturday" id="saturday">
                          <label class="form-check-label" for="saturday">Saturday</label>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Sunday" id="sunday">
                          <label class="form-check-label" for="sunday">Sunday</label>
                        </div>
                      </div>

                      <div class="error" id="spOperatingDaysError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spOperatingTimes" class="form-label">Operating Times</label>
                      <div class="d-flex gap-2">
                        <input type="time" class="form-control" id="spOperatingTimeStart">
                        <span>to</span>
                        <input type="time" class="form-control" id="spOperatingTimeEnd">
                      </div>
                      <div class="error" id="spOperatingTimesError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spBasePrice" class="form-label">Base Price</label>
                      <input type="number" class="form-control" id="spBasePrice">
                      <div class="error" id="spBasePriceError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spOvertimeRate" class="form-label">Overtime Rate</label>
                      <input type="number" class="form-control" id="spOvertimeRate">
                      <div class="error" id="spOvertimeRateError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spCaption" class="form-label">Caption</label>
                      <input type="text" class="form-control" id="spCaption">
                      <div class="error" id="spCaptionError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spDescription" class="form-label">Description</label>
                      <textarea class="form-control" id="spDescription"></textarea>
                      <div class="error" id="spDescriptionError"></div>
                    </div>

                    <div class="col-md-6 mb-3">
                      <label for="spService" class="form-label">Service</label>
                      <select class="form-select" id="spService">
                        <option selected disabled value="">Select Service</option>
                      </select>
                      <div class="error" id="spServiceError"></div>
                    </div>
                  </div>
                </div>

        <div class="form-section">
          <button type="submit" class="btn-register" id="submitBtn">
            <span id="btnText">Create Account</span>
          </button>

                <div class="success-message" id="successMessage"></div>
          <div class="error-message" id="errorMessage"></div>
          
          <div class="text-center mt-3">
            <small>Already have an account? <a href="Login.html" class="text-primary">Login here</a></small>
          </div>
        </div>
              </form>
            </div>
          </div>

  <!-- Professional Footer -->
  <footer class="professional-footer">
    <div class="footer-content">
      <div class="footer-grid">
        <div class="footer-section">
          <h3>Event Management System</h3>
          <p>A comprehensive final year project showcasing modern web development technologies and best practices in event management.</p>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="Login.html">Login</a></li>
            <li><a href="Registration.html">Register</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Contact Information</h3>
          <p><i class="fas fa-map-marker-alt me-2"></i> Joriseen Street, Johannesburg</p>
          <p><i class="fas fa-phone me-2"></i> +27 76 244 9990</p>
          <p><i class="fas fa-envelope me-2"></i> <a href="mailto:Bonica@gmail.com">Bonica@gmail.com</a></p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Bonica. All rights reserved. | Developed by Keyware Development Company</p>
    </div>
      </div>
    </footer>

  <!-- Bootstrap JS (kept same as original) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Supabase JS (as in your original) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- JavaScript -->
  <script>
  // Supabase initialization
  const SUPABASE_URL = "https://spudtrptbyvwyhvistdf.supabase.co";
      const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNwdWR0cnB0Ynl2d3lodmlzdGRmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2OTk4NjgsImV4cCI6MjA3MTI3NTg2OH0.GBo-RtgbRZCmhSAZi0c5oXynMiJNeyrs0nLsk3CaV8A"; 
  const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  // User type selection function
  function selectUserType(type) {
    // Remove selected class from all options
    document.querySelectorAll('.user-type-option').forEach(option => {
      option.classList.remove('selected');
    });
    
    // Add selected class to clicked option
    document.querySelector(`[data-type="${type}"]`).classList.add('selected');
    
    // Show registration form
    const registrationForm = document.getElementById('registrationForm');
    const customerForm = document.getElementById('customerForm');
    const serviceProviderForm = document.getElementById('serviceProviderForm');
    
    registrationForm.style.display = 'block';
    
    if (type === 'customer') {
      customerForm.style.display = 'block';
      serviceProviderForm.style.display = 'none';
    } else {
      customerForm.style.display = 'none';
      serviceProviderForm.style.display = 'block';
    }
    
    // Clear any previous errors
    document.getElementById('usertypeSelectError').textContent = '';
  }

  document.addEventListener('DOMContentLoaded', async () => {
    const registrationForm = document.getElementById('registrationForm');
    const customerForm = document.getElementById('customerForm');
    const serviceProviderForm = document.getElementById('serviceProviderForm');
    const errorMessage = document.getElementById('errorMessage');
    const successMessage = document.getElementById('successMessage');

    // Populate services dropdown
    const spServiceSelect = document.getElementById('spService');
    const { data: services } = await supabaseClient.from('service').select('service_id, service_name');
    services.forEach(s => {
      const option = document.createElement('option');
      option.value = s.service_id;
      option.textContent = s.service_name;
      spServiceSelect.appendChild(option);
    });

    // Get selected user type
    function getSelectedUserType() {
      const selectedOption = document.querySelector('.user-type-option.selected');
      return selectedOption ? selectedOption.dataset.type : null;
    }

    // Password toggles
    const togglePassword = (inputId, toggleId) => {
      const input = document.getElementById(inputId);
      const toggle = document.getElementById(toggleId);
      toggle.addEventListener('click', () => {
        input.type = input.type==='password'?'text':'password';
        const icon = toggle.querySelector('i');
        icon.className = input.type === 'password' ? 'fas fa-eye' : 'fas fa-eye-slash';
      });
    };
    togglePassword('password','passwordToggle');
    togglePassword('confirmPassword','confirmPasswordToggle');
    togglePassword('spPassword','spPasswordToggle');
    togglePassword('spConfirmPassword','spConfirmPasswordToggle');

    // Form submission with validation
    registrationForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      errorMessage.style.display='none';
      successMessage.style.display='none';

      if(!validateForm()) return;

      let registrationData={}, tableName='';
      const userType = getSelectedUserType();

      if(userType==='customer'){
        tableName='client';
        registrationData = {
          client_name: document.getElementById('name').value,
          client_surname: document.getElementById('surname').value,
          client_password: document.getElementById('password').value,
          client_email: document.getElementById('email').value,
          client_contact: document.getElementById('contact').value,
          client_province: document.getElementById('province').value,
          client_city: document.getElementById('city').value,
          client_town: document.getElementById('town').value,
          client_house_number: document.getElementById('houseNumber').value,
          client_street_name: document.getElementById('streetName').value,
          client_postal_code: document.getElementById('postalCode').value,
          client_preferred_notification: document.getElementById('notification').value
        };
      } else {
        tableName='service_provider';
        registrationData = {
          service_provider_name: document.getElementById('spName').value,
          service_provider_surname: document.getElementById('spSurname').value,
          service_provider_password: document.getElementById('spPassword').value,
          service_provider_email: document.getElementById('spEmail').value,
          service_provider_contactno: document.getElementById('spContact').value,
          service_provider_location: document.getElementById('spLocation').value,

          // Store operating days as a comma-separated string
          service_provider_operating_days: Array.from(document.querySelectorAll('#spOperatingDays input:checked'))
                                               .map(cb => cb.value),  // <-- THIS IS CORRECT

          // Store operating times as a string (adjust if you have JSON column)
          service_provider_operating_times: `${document.getElementById('spOperatingTimeStart').value} - ${document.getElementById('spOperatingTimeEnd').value}`,

          service_provider_base_rate: parseFloat(document.getElementById('spBasePrice').value),
          service_provider_overtime_rate: parseFloat(document.getElementById('spOvertimeRate').value),
          service_provider_caption: document.getElementById('spCaption').value,
          service_provider_rating: 5,
          service_provider_description: document.getElementById('spDescription').value,
          service_id: document.getElementById('spService').value,
          created_at: new Date().toISOString()
        };
      }

      try {
        const { data, error } = await supabaseClient.from(tableName).insert([registrationData]);

        if (error) {
          errorMessage.textContent = error.message;
          errorMessage.style.display = 'block';
        } 
        else {
          // ‚úÖ Save username in localStorage
          if (userType === 'customer') {
            localStorage.setItem("userName", document.getElementById("name").value + " " + document.getElementById("surname").value);
          } else {
            localStorage.setItem("userName", document.getElementById("spName").value + " " + document.getElementById("spSurname").value);
          }

          successMessage.textContent = "Registration successful! Redirecting...";
          successMessage.style.display = 'block';

          setTimeout(() => {
            window.location.href = "login.html";
          }, 1500);
        }

      } catch (err) {
        errorMessage.textContent = err.message;
        errorMessage.style.display = 'block';
      }

    });

    // Validation function
    function validateForm(){
      let isValid=true;
      const userType = getSelectedUserType();
      
      if (!userType) {
        document.getElementById('usertypeSelectError').textContent = 'Please select a user type';
        isValid = false;
        return isValid;
      }
      
      // Fix validation fields (remove spSlots, handle days separately)
      const formFields = userType==='customer'? 
        ['name','surname','password','confirmPassword','contact','email','province','city','town','houseNumber','streetName','postalCode','notification']:
        ['spName','spSurname','spPassword','spConfirmPassword','spContact','spEmail','spLocation','spBasePrice','spOvertimeRate','spService'];
      formFields.forEach(f => { if(!validateField(document.getElementById(f))) isValid=false; });
      return isValid;
    }

    function validateField(field){
      const value=field.value.trim(), id=field.id;
      let message='', valid=true;
      switch(id){
        case 'name': case 'surname': case 'spName': case 'spSurname':
          if(!value){message='Required'; valid=false;}
          else if(!/^[a-zA-Z\s]+$/.test(value)){message='Only letters allowed'; valid=false;}
          break;
        case 'password': case 'spPassword':
          if(!value){message='Required'; valid=false;}
          else if(value.length<8){message='Min 8 chars'; valid=false;}
          else if(!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(value)){message='Upper,lower,number required'; valid=false;}
          break;
        case 'confirmPassword': case 'spConfirmPassword':
          const pwd=document.getElementById(id==='confirmPassword'?'password':'spPassword').value;
          if(!value){message='Required'; valid=false;}
          else if(value!==pwd){message='Passwords do not match'; valid=false;}
          break;
        case 'contact': case 'spContact':
          if(!value){message='Required'; valid=false;}
          else if(!/^[\+]?[0-9]{7,15}$/.test(value.replace(/\s/g,''))){message='Invalid'; valid=false;}
          break;
        case 'email': case 'spEmail':
          if(!value){message='Required'; valid=false;}
          else if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)){message='Invalid'; valid=false;}
          break;
        case 'postalCode': if(!value){message='Required'; valid=false;} break;
        case 'spSlots': case 'spBasePrice': case 'spOvertimeRate':
          if(!value || isNaN(value)){message='Must be a number'; valid=false;} break;
        case 'spService': if(!value){message='Select a service'; valid=false;} break;
        default: if(!value){message='Required'; valid=false;}
      }
      const errorEl = document.getElementById(id+'Error');
      if(!valid) errorEl.textContent=message; else errorEl.textContent='';
      return valid;
    }

  });
  </script>

  <!-- Back to top & small UI script (Bonica style) -->
  <script>
    // Back to top button
    const backToTopBtn = document.querySelector('.back-to-top');
    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) backToTopBtn.classList.add('show');
      else backToTopBtn.classList.remove('show');
    });
    backToTopBtn.addEventListener('click', e => {
      e.preventDefault();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
</body>
</html>
